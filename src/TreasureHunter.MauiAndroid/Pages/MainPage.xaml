<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:camera="clr-namespace:Camera.MAUI;assembly=Camera.MAUI"
             x:Class="TreasureHunter.MauiAndroid.Pages.MainPage"
             Title="Treasure Hunter AR">

    <Grid>
        <!-- Camera View -->
        <camera:CameraView 
            x:Name="CameraView"
            VerticalOptions="FillAndExpand"
            HorizontalOptions="FillAndExpand" />

        <!-- AR Overlay for treasures -->
        <GraphicsView 
            x:Name="TreasureOverlay"
            InputTransparent="False"
            VerticalOptions="FillAndExpand"
            HorizontalOptions="FillAndExpand">
            <GraphicsView.GestureRecognizers>
                <TapGestureRecognizer Tapped="OnOverlayTapped" />
            </GraphicsView.GestureRecognizers>
        </GraphicsView>

        <!-- UI Controls Overlay -->
        <Grid 
            VerticalOptions="FillAndExpand"
            HorizontalOptions="FillAndExpand"
            InputTransparent="True">
            
            <!-- Top Status Bar -->
            <Frame 
                BackgroundColor="#CC000000"
                Padding="15,10"
                CornerRadius="0"
                HasShadow="False"
                VerticalOptions="Start"
                HorizontalOptions="FillAndExpand">
                <Grid ColumnDefinitions="*,Auto,Auto">
                    <Label 
                        x:Name="StatusLabel"
                        Text="Searching for treasures..."
                        TextColor="White"
                        VerticalOptions="Center" />
                    <Label 
                        x:Name="TreasureCountLabel"
                        Grid.Column="1"
                        Text="0 nearby"
                        TextColor="Gold"
                        Margin="10,0"
                        VerticalOptions="Center" />
                    <Label 
                        x:Name="PointsLabel"
                        Grid.Column="2"
                        Text="0 pts"
                        TextColor="Gold"
                        FontAttributes="Bold"
                        VerticalOptions="Center" />
                </Grid>
            </Frame>

            <!-- Bottom Controls -->
            <StackLayout 
                VerticalOptions="End"
                HorizontalOptions="Center"
                Margin="0,0,0,20"
                Spacing="10">
                
                <!-- Compass indicator -->
                <Frame 
                    BackgroundColor="#CC000000"
                    Padding="10"
                    CornerRadius="20"
                    HasShadow="False">
                    <Label 
                        x:Name="CompassLabel"
                        Text="N"
                        TextColor="White"
                        FontSize="18"
                        FontAttributes="Bold"
                        HorizontalOptions="Center" />
                </Frame>

                <!-- Action Button -->
                <Button 
                    x:Name="CollectButton"
                    Text="Collect Treasure"
                    BackgroundColor="Gold"
                    TextColor="Black"
                    FontAttributes="Bold"
                    CornerRadius="25"
                    Padding="30,15"
                    IsVisible="False"
                    Clicked="OnCollectClicked" />
            </StackLayout>

            <!-- Loading Indicator -->
            <ActivityIndicator 
                x:Name="LoadingIndicator"
                IsRunning="False"
                Color="Gold"
                VerticalOptions="Center"
                HorizontalOptions="Center" />
        </Grid>
    </Grid>

</ContentPage>
